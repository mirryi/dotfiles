# Accounts
source ~/.config/mutt/accounts

# General settings
# sort with most recent on top
set sort=reverse-date-received

# Mailcap
set mailcap_path=~/.config/mutt/mailcap

# automatically open HTML
auto_view text/html
alternative_order text/plain text/html

# Keybindings
# unbind some defaults
bind index <esc>V noop
bind index <esc>v noop
bind index \Cn noop
bind index \Cp noop
bind index,pager g noop

# navigate top/bottom
bind alias,index,browser,query G last-entry
bind pager G bottom
bind alias,index,browser,query gg first-entry
bind pager gg top

# navigate threads
bind index { previous-thread
bind pager { half-up
bind index } next-thread
bind pager } half-down

# collapse threads
bind index za collapse-all
bind index zA collapse-thread

# jump to next/previous search
bind index n search-next
bind index N search-opposite

# skip trash when deleting with the delete key
bind index,pager <delete> purge-message

# readline-like history browsing using up/down keys.
bind editor <up> history-up
bind editor <down> history-down

# switch to other common folders
macro index,pager gd '<change-folder>$postponed<enter><buffy-list>' 'open drafts'
macro index,pager gi '<change-folder>$spoolfile<enter><buffy-list>' 'open inbox'
macro index,pager gj '<change-folder>+spam<enter><buffy-list>'      'open junk mail (spam)'
macro index,pager gr '<change-folder>^<enter><buffy-list>'          'refresh folder'
macro index,pager gs '<change-folder>$record<enter><buffy-list>'    'open sent mail'
macro index,pager gt '<change-folder>$trash<enter><buffy-list>'     'open trash'

# toggle and navigate sidebar
macro index \ca '<sidebar-toggle-visible>'
macro index J '<sidebar-toggle-visible><sidebar-next><sidebar-open><sidebar-toggle-visible>'
macro index K '<sidebar-toggle-visible><sidebar-prev><sidebar-open><sidebar-toggle-visible>'

# sync offlineimap
macro index \cr '<enter-command>unset wait_key<enter><shell-escape>offlineimap -o<enter>' 'sync offlineimap'

# <ctrl>b to navigate and open urls
macro pager \cb '<pipe-entry>urlview<enter>' 'follow links with urlview'
