#!/bin/zsh
export _Z_DATA="${XDG_DATA_HOME}/z"
export GPG_TTY=$(tty)

# source sh config
. "$XDG_CONFIG_HOME/sh/env"

__files_in() {
  if [[ -d "$1" ]]; then
    find "$1" -maxdepth 1 -mindepth 1 -not -path '\.*'
  fi
}

__source_files() {
  if [[ "$(__files_in "$1")" ]]; then
    for f in "$1/"*; do
      . "$f"
    done
  fi
}

# source zsh aliases
. "$XDG_CONFIG_HOME/zsh/aliases"
__source_files "$XDG_CONFIG_HOME/zsh/aliasc"

__source_files "$XDG_CONFIG_HOME/zsh/envc"

# source local config
if [[ -f "$XDG_CONFIG_HOME/zsh/local.zsh" ]]; then
  . "$XDG_CONFIG_HOME/zsh/local.zsh"
fi

unset -f __files_in
unset -f __source_files
