#!/bin/sh

# XDG base directory specification
export XDG_CACHE_HOME="${HOME}/.cache"
export XDG_CONFIG_HOME="${HOME}/.config"
export XDG_DATA_HOME="${HOME}/.local/share"
export XDG_STATE_HOME="${HOME}/.local/var/lib"
export XDG_LIB_HOME="${HOME}/.local/lib"
export XDG_LOG_HOME="${HOME}/.local/var/log"
export LD_LIBRARY_PATH="${XDG_LIB_HOME}"
export XDG_DATA_DIRS="${XDG_DATA_HOME}:/usr/local/share:/usr/share"

# fix QT display bugs
export QT_AUTO_SCREEN_SCALE_FACTOR=0

# XDG base directory fixes
export BASH_COMPLETION_USER_FILE="${XDG_CONFIG_HOME}/bash-completion/bash_completion"
export HISTFILE="${XDG_DATA_HOME}/bash/history"
export INPUTRC="${XDG_CONFIG_HOME}/readline/inputrc"

# load other env files
if [ -d "$XDG_CONFIG_HOME/sh/envc" ]; then
  for f in "$XDG_CONFIG_HOME/sh/envc"/*; do
    . $f
  done
fi

# define PATH from shared PATH file
export PATH="${PATH}:${HOME}/.local/bin"
. "$XDG_CONFIG_HOME/sh/path"
# define aliases from shared aliases files
. "$XDG_CONFIG_HOME/sh/aliases"

if [ -d "$XDG_CONFIG_HOME/sh/local" ]; then
  if [[ "$(find "$XDG_CONFIG_HOME/sh/local" -not -path '*/\.*' -maxdepth 1 -mindepth 1 2>/dev/null)" ]]; then
    for f in "$XDG_CONFIG_HOME/sh/local/"*; do
      . "$f"
    done
  fi
fi
